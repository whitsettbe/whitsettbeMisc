<!DOCTYPE html>
<html>
	<head>
		<title>Chin Up</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
		<style>
		</style>
	</head>
	<body>
	<input type="button" value="Start" onclick="start()">
	<video autoplay="true" id="vid" hidden></video><br>
	<canvas id="canv" style="border:1px solid black;"></canvas>
	<script>
		const canvas = $("#canv")[0];
		setInterval(function()
		{
			if(Math.abs(canvas.width / window.innerWidth - .9) > 0.05 || Math.abs(canvas.height / window.innerHeight - .9) > .05)
			{
				canvas.width = 0.9 * window.innerWidth;
				canvas.height = 0.9 * window.innerHeight;
			}
		}, 1000);
		const ctx = canvas.getContext("2d");
		var player;
		var video;
		
		const acl = new Accelerometer({ frequency: 60 });
		acl.addEventListener("reading", () => {
			if(Math.atan2(acl.z, Math.sqrt(acl.x * acl.x + acl.y * acl.y)) * 180 / Math.PI < -60)
			{
				$('body')[0].style.backgroundColor = '#FFFF99';
			}
			else
			{
				$('body')[0].style.backgroundColor = '#FFFFFF';
			}
		});

		function start()
		{
			acl.start();

			if (navigator.mediaDevices.getUserMedia)
			{
				navigator.mediaDevices.getUserMedia({video: {facingMode: 'environment'}}).then(
					function(stream)
					{
						$('#vid')[0].srcObject = stream;
						setInterval(function(){ctx.drawImage($('#vid')[0], 0, 0, canvas.height * 3 / 4, canvas.height);}, 30);
					});
				
			}
		}
	</script>
	</body>
	<footer style="position: fixed; bottom: 0">
		3-14-2023 9:39 PM
	</footer>
</html>